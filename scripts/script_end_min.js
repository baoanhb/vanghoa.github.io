"use strict";const minsz=10,time_interval=250,soitemperscreen=6,soitem_tong=16,$=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document),$create=document.createElement.bind(document),ulnav=$("ul#nav"),$ulnav=ulnav.querySelector.bind(ulnav),root=document.querySelector(":root"),proproot=getComputedStyle(root),getprop=proproot.getPropertyValue.bind(proproot),rootstyle=root.style,setprop=rootstyle.setProperty.bind(rootstyle),r_mouseenter=rmvE_("mouseenter"),r_transitionend=rmvE_("transitionend");let navsz=+getprop("--navsz_sampl").slice(0,-2);const colmax=+getprop("--colmax")+2,soitem=new Array(4);let availit_num,smallersd,smallersd_min,fetch_data,soitem_soon,delaypromise=Promise.resolve(),crrntnavlist=0,count=0,crrntitemid="1",navitemobj=[],navitem=[[],[],[]],hovercheck=[!0,!0,!0],not_firstload=!1,eoins=!0;const projfr=$ulnav("section#iframe"),wlcmscr=$ulnav("section#welcome"),homebtn=$ulnav('.btn[onclick="homescreen()"]'),seemorebtn=ulnav.querySelectorAll(".seemore_func"),seemorenav=$$(".seemore"),sortbtn=$$(".seemore button"),ckbx=$ulnav("label#tglnav input"),tglnav=$ulnav("label#tglnav"),main=$ulnav("#main"),sneak=$ulnav("#sneak_peek"),landing=$ulnav("#landing_pg"),about=$ulnav("#about"),sneak_title=$ulnav("#sneak_title"),resume=$ulnav("#myresume"),btn_img=$ulnav(".btn img"),description=$ulnav("#description"),opensep=$ulnav("#opensep"),instruction=$$(".instruction"),instruction_main=$(".instruction.main"),instruction_nav=$$(".instruction.nav_"),instruction_btn=$$(".instruction.btn_"),instruction_btn_home=$(".instruction.btn_.tl"),instruction_btn_sort=$(".instruction.btn_.tr"),instruction_btn_nav=[$(".instruction.btn_.br"),$(".instruction.btn_.bl")],nav_instruction=$("#nav_instruction"),navlist_instruction=$("#navlist_instruction"),sort_instruction=$("#sort_instruction"),home_instruction=$$(".home_instruction"),instruction_skip=$$("span.skip_tut"),fragment=document.createDocumentFragment(),fragment_sneak=document.createDocumentFragment(),border_3d={top:$ulnav("#top_border"),bot:$ulnav("#bot_border"),left:$ulnav("#left_border"),right:$ulnav("#right_border"),removehighlight_border_top:function(e){color_border("top",e.target,!1,"N/A")},removehighlight_border_bot:function(e){color_border("bot",e.target,!1,"N/A")},removehighlight_border_left:function(e){color_border("left",e.target,!1,"N/A")},removehighlight_border_right:function(e){color_border("right",e.target,!1,"N/A")}},soon_obj={name:"Coming",date:"soon",field:[{name:"Intentionally",class:""},{name:"left",class:""},{name:"blank",class:""}],description:"",soon:!0},last_obj=[{name:"Misc projects",date:"1/2020 - present",field:[{name:"Communication design",class:""},{name:"Poster design",class:"illus"},{name:"NFT design",class:"dg_pro"}],description:"Various small-scale projects, personal and full-time works",soon:!1,key_:"misc"}];viewportheight();const touchable=hasTouch();hoveractivate();let scrlbrwd=getScrollbarWidth();setprop("--scrlbrwd",`${scrlbrwd}px`);let offsetifr=2*navsz+scrlbrwd+1+2*(touchable?0:+getprop("--hbhwidth_ave").slice(0,-2));function navli_html_generation(e){for(let t in e){let n=e[t],o=n.key_??+t+1;navitemobj[t]={dg_pro:!1,print:!1,mo_gra:!1,illus:!1,spcl:!1,gr_co:!1,time:!0,soon:!1};let r={elem:$create("div"),chld:[{elem:$create("h2"),chld:[$create("span"),$create("span")]},$create("p"),$create("p")]};r.chld[0].chld[0].textContent=n.name,r.chld[0].chld[1].textContent=n.date,r.chld[0].chld[1].classList.add("date"),r.chld[0].elem.append(r.chld[0].chld[0]," ",r.chld[0].chld[1]),r.chld[1].classList.add("field");for(let e in n.field){let o=$create("span");o.className=`field ${n.field[e].class}`,fieldcheck(n.field[e].class,navitemobj[t]),o.textContent=n.field[e].name,r.chld[1].append(o," ")}r.chld[2].textContent=n.description,r.elem.classList.add("text"),r.elem.append(r.chld[0].elem,r.chld[1],r.chld[2]);let i=$create("div");i.classList.add("hovercontent"),n.soon?navitemobj[t].soon=!0:(i.dataset.src=`${o}`,i.style.backgroundImage=`url('thumbnail/${o}.jpg')`);let a=$create("li");if(n.soon&&a.classList.add("soon"),a.setAttribute("onclick","nav_navigate(this)"),a.id="_"+(+t+1),a.setAttribute("id_",o),a.title=`click to see this project: ${n.name}`,a.append(r.elem,i),fragment.appendChild(a),0==t&&a.classList.add("current"),navitemobj[t].elem=a,navitem[Math.floor(t/6)].push(a),touchable||a.addEventListener("mouseleave",hover_out),!n.soon){let e=$create("li"),r=$create("div");r.setAttribute("onclick",`nav_navigate(navitemobj[${t}].elem)`),r.title=a.title;let i=$create("h2"),l=$create("span");l.textContent=`${+t+1}/ ${n.name}`;let s=$create("span");s.textContent=n.date,s.classList.add("date");let c=$create("img");c.src=`thumbnail/home/${o}.jpg`,c.alt=n.name,i.append(l," ",s),r.append(c,i),e.appendChild(r),fragment_sneak.appendChild(e)}}onresizesortbtn(!1),btn_img.addEventListener("transitionend",init_vh),ckbx.checked=!0,togglenav(ckbx)}function init_vh(){r_transitionend([init_vh],btn_img),viewportheight()}function fieldcheck(e,t){function n(n){return t[n]=t[n]||e==n,e==n}n("dg_pro")||n("print")||n("mo_gra")||n("illus")||n("spcl")}projfr.querySelector("iframe").addEventListener("transitionend",nav_navigate_event),fetch("item.json").then((e=>e.json())).then((e=>{fetch_data=e,availit_num=e.length+last_obj.length;for(let e of last_obj)fetch_data.push(e);soitem_soon=16-availit_num;for(let e=1;e<=soitem_soon;e++)fetch_data.push(soon_obj);navli_html_generation(fetch_data)})).catch((e=>console.error(e))),window.onresize=_.debounce((function(){navsz=+getprop("--navsz_sampl").slice(0,-2),scrlbrwd=getScrollbarWidth(),setprop("--scrlbrwd",`${scrlbrwd}px`),offsetifr=(0==ckbx.checked?2*navsz:0)+scrlbrwd+1+2*(touchable||0!=ckbx.checked?0:+getprop("--hbhwidth_ave").slice(0,-2)),ifr_widthfit(projfr.querySelector("iframe")),viewportheight(),onresizesortbtn(!0)}),1e3);